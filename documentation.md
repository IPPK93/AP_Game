# Документация по проекту AP_game

### Ссылки

- [Класс Field](#field)
- [Класс Physics](#physics)
- [Класс Camera](#camera)
- [Класс Mouse](#mouse)
- [Класс GameObject](#game-object)
    - [Класс LiveObject](#live-object)
        - [Класс Enemy](#enemy)
        - [Класс Player](#player)
    - [Класс LifelessObject](#lifeless-object)
        - [Класс GameItem](#game-item)
        - [Класс Block](#block)
            - [Класс StaticBlock](#static-block)


В данном проекте все объекты неявно делятся на видимые и невидимые. К невидимым объектам в данный момент относятся следующие:

- Физика - класс, обрабатывающий изменения, касающиеся физики (столкновения, воздействие сил, скорости объектов)
- Мышь - класс, обрабатывающий поведение мыши (нажатие на определённый пиксель)
- Камера - класс, отвечающий за обработку видимой части экрана
- Поле - основной класс, на котором строится игра. Хоть называть поле невидимым объектом несколько некорректно, мы будем считать, что поле состоит из видимых объектов, но само оно невидимо.

Все видимые объекты в данный момент являтся производными от абстрактного класса для игровых объектов (класс GameObject). Каждый игровой объект может быть:

- Живым (LiveObject)
- Неживым (LifelessObject)

Более подробное объяснение функций классов для видимых объектов будет приведено далее.

На этом краткое введение завершается. Обсудим более конкретно, из чего состоят представленные классы и их производные. Детали имплементации будут объяснены после обзора полей и методов имеющихся классов.

---

<span id = "field"></span>
## Класс Field

Класс Field отвечает за обработку игровых событий. Ввиду его важности, этот класс является довольно громоздким.

В данный момент содержит следующие поля:

- screen - объект типа pygame.Surface, в котором содержится поверхность, которая будет обрабатываться инстансом данного класса. На данный момент в конструкторе этому полю присваивается pygame.display (то есть это поверхность, отвечающая за дисплей)
- camera - объект типа Camera
- mouse - объект типа Mouse
- player - объект типа Player
- enemies - список объектов типа Enemy
- blocks - словарь, который содержит ключи как идентификаторы объектов на карте (см. map далее), и значения как соответствующие блоки
- blocks_size - число, которое содержит информацию о линейном размере одного блока
- dyn_obj - словарь, в котором записаны все динамические объекты (см. далее)
- map - список, в котором будет находиться карта уровня. Уровень будет загружаться из файла
- tiles - список блоков, находящихся на данном уровне
- static_map - объект типа pygame.Surface, в который загружается информация о статической части карты
- dynamic_map - объект типа pygame.Surface, в который загружает вся карта с учётом динамических объектов

Помимо этого, имеются следующие методы:

- update() - функция, отвечающая за обновление поля и всех входящих туда объектов
- load_map() - функция, которая загружает объекты текущего уровня
- set_static_map() - функция, которая отрисовывает в static_map статическую часть карты
- fill_dynamic_map() - функция, отвечающая за заполнение динамической карты

---

<span id = "physics"></span>
## Класс Physics

Класс Physics отвечает за обработку событий, происходящих с объектами с точки зрения физики. 

Каждый инстанс сего класса в данный момент имеет следующие поля:

- gravity - число, характеризующее действие на тело силы притяжения
- friction_coeff - число, характеризующее действие на тело силы трения о другие объекты
- force - число, характеризующее силу, прикладываемая самим телом за одно действие
- velocity - пара (x, y), характеризующая вектор скорости данного тела
- collides - словарь, который содержит информацию о стороне столкновения объекта с окружающими предметами

Также имеются следующие методы:

- update() - функция, обновляющая параметр скорости объекта.

---

<span id = "camera"></span>
## Класс Camera

Класс Camera отвечает за отрисовку нужной части экрана. Работа этого класса в данный момент основывается на возможностях модуля pygame или, если точнее, возможностях функции pygame.Surface.blit()

Данный класс имеет следующие поля:

- rect - объект типа pygame.Rect, который является областью отрисовки
- offset - пара (width, height), которая обозначает границы, за которые фокусируемый объект не должен выходить

Помимо этого, имеются следующие методы:

- update() - обновляет положение камеры относительно объекта, который передаётся как аргумент данного метода

---

<span id = "mouse"></span>
## Класс Mouse

Класс Mouse довольно прост, он отвечает за обработку поведения мыши. 

Объекты типа Mouse содержат следующие поля:

- pos - пара (x, y), характеризующая текущую позицию мыши при нажатии левой кнопки. Если левая кнопка мыши не нажата - pos будет равен (-10000, -10000)
- collisions - список, содержащий объекты, которые содержат нажимаемый пиксель

Имеются следующие методы:

- update() - функция, отвечающая за обновление позиции мыши. Из-за особенностей работы класса Camera, отступ показываемой части относительно карты уровня передаётся в качестве аргумента
- collides() - функция, отвечающая за фиксирование объектов из определённой группы (передаётся как аргумент), которые содержат нажимаемый пиксель

---

<span id = "game-object"></span>
## Класс GameObject

Класс GameObject в данный момент является базовым классом для любого видимого объекта на поле.

Данный класс предоставляет следующие поля:

- image - строка, в которой содержится путь до исходной картинки
- width, height - числа, характеризующие размеры объекта
- surf - объект типа pygame.Surface, являющийся поверхностью объекта
- rect - объект типа pygame.Rect

Класс GameObject имеет следующие методы: никакие.

Производными от этого класса являются классы для живых (LiveObject) и неживых (LifelessObject) объектов. Дабы не повторяться, далее не будем говорить о полях и методах производных классов.


<span id = "live-object"></span>
### Класс LiveObject

Название говорит само за себя. 

Каждый инстанс данного класса помимо прочих, имеет следующие поля:

- hp - число, хранящее информацию о здоровье объекта
- damage - число, характеризующее наносимый объектом урон
- mp - число, хранящее информацию о magic points объекта
- items - список предметов, имеющихся у объекта
- physics - объект типа Physics
- velocity - пара (x, y), созданная исключительно с целью ненаписания physics каждый раз во время вызовы поля velocity для self.physics.velocity

Имеются следующие методы:

- update() - функция, которая обновляет данные объекта
- set_transparent_color() - функция, задающая цвет, который следует считать прозрачным при отрисовке
- move() - функция, отвечающая за перемещение объекта в пространстве с учётом препятствий, которые передаются как аргументы функции

Производными данного класса в данный момент являются классы Enemy и Player


<span id = "enemy"></span>
#### Класс Enemy

Класс вражеских юнитов. Класс является недоработанным (впрочем, как и большинство остальных), поля и методы данного класса будут меняться.

Объекты Enemy содержат следующие поля:

- cur_direction - текущее направление движения объекта

В этом классе перегружен метод move. Он сделан таким образом, чтобы позволять инстансам класса иметь собственные поведенческие модели. За это отвечает следующие методы:

- ai_move() - функция, обрабатывающая поведение объекта. В данный момент эта функция меняет направление движения объекта при соударении с объектом из некоторой группы


<span id = "player"></span>
#### Класс Player

Класс игрока, контролируемого пользователем.

Содержит следующие поля: никакие.

В классе перегружена функция move таким образом, чтобы обрабатывать нажатия кнопок на клавиатуре и, исходя из полученной информации, пытаться совершить движение в ту или иную сторону. Движения вниз в данный момент не поддерживаются ввиду отсутствия необходимости.


Теперь перейдём к классу для неживых объектов.


<span id = "lifeless-object"></span>
### Класс LifelessObject

Название говорит само за себя.

Данный класс дополнительно содержит следующие поля:

- destructibility - булеан, в котором хранится информация о возможности разрушения данного объекта

Кроме того, класс предоставляет следующие методы: никакие.

Производными данного класса в данный момент являются классы GameItem и Block.


<span id = "game-item"></span>
#### Класс GameItem

Класс, отвечающий за игровые предметы. Пока не имплементирован, так что ничего не содержит. Игровые предметы неразрушаемы.


<span id = "block"></span>
#### Класс Block

Название класса говорит само за себя. В данный момент существуют только статические блоки, поэтому данный класс ничего не содержит.

Любой инстанс данного класса содержит следующие поля: никакие.

Имеются следующие методы: никакие


<span id = "static-block"></span>
##### Класс StaticBlock

Класс не изменяющихся (неподвижных и неразрушаемых) со временем блоков.

Объекты StaticBlock дополнительно содержат следующие поля: никакие.

Данный класс предоставляет следующие методы:

- get_moved_block() - функция, возвращающая блок, сдвинутый на определённую позицию (передаётся как аргумент функции)


--- 
 
 Данный файл будет дополняться по мере возможностей. 